{% extends 'base.html.twig' %}


{% block body %}
	<div class="row text-center">
		<h1 class="mt-5 mb-5">{{ trick.name }}</h1>
		<hr class="mt-3 mb-3">
		<div class="row">
			<div class="col">
				<button class="btn btn-secondary toggler mr-5 d-lg-none" data-toggle="collapse" data-target="#carousel">Afficher/masquer plus de médias
				</button>
			</div>

			<div class="collapse d-lg-block" id="carousel">
				<div id="mycarousel" class="carousel slide" data-ride="carousel" data-interval="false">
					<div class="carousel-inner">
						<div class="carousel-item active">
							<img src="{{ asset('uploads/mainmediatricks/' ~ trick.mainMedia) }}" alt="Image principale" style="max-height:46rem">
						</div>
						{% for image in images %}
							<div class="carousel-item">
								<img src="{{ asset('uploads/tricks/' ~ image.source) }}" alt="Image secondaire" style="max-height:46rem">
							</div>
						{% endfor %}

						{% for video in videos %}
							<div class="carousel-item">{{video.source | raw }}</div>
						{% endfor %}
					</div>
					<a class="carousel-control-prev" href="#mycarousel" role="button" data-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
						<span class="sr-only">Previous</span>
					</a>
					<a class="carousel-control-next" href="#mycarousel" role="button" data-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
						<span class="sr-only">Previous</span>
					</a>
				</div>
			</div>
		</div>

		<hr class="mt-3 mb-3">
		<div class="font-weight-bold">

			Figure ajoutée le:
			{{ trick.CreatedAt | date('d/m/Y') }}
			à
			{{ trick.CreatedAt | date('H:i') }}
			par
			{{ trick.users.username}}.

			{% if trick.CreatedAt != trick.ModifiedAt %}
			</br>Dernière modification le:
			{{ trick.ModifiedAt | date('d/m/Y') }}
			à
			{{ trick.ModifiedAt | date('H:i') }}
		{% endif %}
	</div>
	<div class="font-weight-bold">Cette figure fait partie des
		{{ trick.figureGroup.name }}
	</div>
	<div class="font-weight-bold">Description:
		{{ trick.Description }}
	</div>

	<hr class="mt-3 mb-3">
	<div class="row">
		<h1 class="text-center">Ajouter un commentaire</h1>
		<div class="col-6 offset-md-3">
			{% if app.user %}
				{{ form_start(formComment) }}
				{{ form_row(formComment.Content) }}

				<button type="submit" class="btn btn-success">
					Ajouter le commentaire
				</button>

				{{ form_end(formComment) }}
			{% else %}
				<div>Seuls les utilisateurs connectés peuvent laisser des commentaires.</div>
				<div>Pour laisser un commentaire, veuillez vous
					<a href="{{ path('signup') }}">connecter</a>.
				</div>
			{% endif %}

			<hr class="mt-3 mb-3">
			{% include 'home/comments.html.twig' %}
		</div>
	</div>
</div>{% endblock %}
